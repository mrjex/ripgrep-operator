#!/bin/bash

# Change to the charm directory
cd "$(dirname "$0")"

# Ensure we have python3-venv and pip installed
apt update
apt install -y python3-venv python3-pip

# Set up Python environment
python3 -m venv .venv
source .venv/bin/activate

# Install requirements
pip install -r requirements.txt

# Run the charm with proper Python path
export PYTHONPATH="${PYTHONPATH}:${PWD}/src"
exec python3 -m src.charm.charm "$@"

# PYTHONPATH=. exec python3 -m src.charm.charm "$@" # PREVIOUS